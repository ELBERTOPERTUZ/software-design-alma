<h1 class="mb-4 fw-bold text-center">Panel de Administraci칩n</h1>

<div class="my-container">
  <!-- Primera caja -->
  <div class="my-box my-box-large p-5">
      <div>
          <h2 class="fw-bold text-white fs-4"><%= t('welcome') %> 游녦</h2>
          <h2 class="fw-bold text-white fs-4"><%= current_user.name %>!</h2>
          <p class="my-subtitle"><%= t('message_help_1') %></p>
          <p class="my-subtitle"><%= t('message_help_2') %></p>
          <a href="https://gooivan.github.io/software-design-alma/" class="btn btn-primary mt-3 w-50 fw-bold" target="_blank">
            <%= t('go_now') %>
          </a>
      </div>
      <%= render 'shared/icon_help'%>
  </div>

  <!-- Segunda caja -->
  <div class="my-box my-box-small">
    <div class="carousel">
      <div class="carousel-dots">
        <% 3.times do |i| %>
          <span class="carousel-dot" data-index="<%= i %>"></span>
        <% end %>
      </div>
      <button class="carousel-btn prev">&larr;</button>
      <div class="carousel-images">
        <%= image_tag("https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-6.webp", class: "carousel-image") %>
        <%= image_tag("https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-5.webp", class: "carousel-image") %>
        <%= image_tag("https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-4.webp", class: "carousel-image") %>
      </div>
      <button class="carousel-btn next">&rarr;</button>
    </div>
  </div>
</div>

<!-- Contenedor principal en columna -->
<div class="mt-4 gap-3 div-cards">

  <!-- Primera tarjeta: Total Users -->
  <div class="cards shadow-sm p-4 d-flex flex-row justify-content-between align-items-center w-33">
    <!-- Columna izquierda: texto -->
    <div class="d-flex flex-column justify-content-center">
      <div class="fw-bold mb-1">
        <%= t('total_active_users') %>
      </div>
      <div class="fs-3 fw-bold mb-1"><%= @users.all.size %></div>
      <div class="d-flex align-items-center gap-2 text-success">
        <img src="<%= asset_path('admins/ic-levelup.svg') %>" class="icon-levelup" alt="Level up icon">
        <div class="text-dark fs-6 fw-bold"><%= users_growth_percentage %> 
          <span class="text-gray fw-normal">
            <%= t("last_7_days") %>
          </span> 
        </div>
      </div>
    </div>

    <!-- Gr치fico a la derecha -->
    <div style="width: 120px; height: 60px;">
      <canvas
        id="usuariosChart"
        width="300"
        height="150"
        data-labels='<%= @labels.to_json.html_safe %>'
        data-values='<%= @usuarios_por_mes.to_json.html_safe %>'>
      </canvas>
    </div>
  </div>
    <!-- Segunda tarjeta: Proximamente -->
  <div class="cards shadow-sm p-4 d-flex flex-row justify-content-between align-items-center w-33">
    <!-- Columna izquierda: texto -->
    <div class="d-flex flex-column justify-content-center">
      <div class="fw-bold mb-1">
        Proximamente...
      </div>
      <div class="fs-3 fw-bold mb-1">0</div>
      <div class="d-flex align-items-center gap-2 text-success">
        <img src="<%= asset_path('admins/ic-levelup.svg') %>" class="icon-levelup" alt="Level up icon">
        <div class="text-dark fs-6 fw-bold"><%= users_growth_percentage %> 
          <span class="text-gray fw-normal">
            <%= t("last_7_days") %>
          </span> 
        </div>
      </div>
    </div>

    <!-- Gr치fico a la derecha -->
    <div style="width: 120px; height: 60px;">
      <canvas
        id="usuariosChart"
        width="300"
        height="150"
        data-labels='<%= @labels.to_json.html_safe %>'
        data-values='<%= @usuarios_por_mes.to_json.html_safe %>'>
      </canvas>
    </div>
  </div>
    <!-- Tercera tarjeta: Proximamente -->
  <div class="cards shadow-sm p-4 d-flex flex-row justify-content-between align-items-center w-33">
    <!-- Columna izquierda: texto -->
    <div class="d-flex flex-column justify-content-center">
      <div class="fw-bold mb-1">
        Proximamente...
      </div>
      <div class="fs-3 fw-bold mb-1">0</div>
      <div class="d-flex align-items-center gap-2 text-success">
        <img src="<%= asset_path('admins/ic-levelup.svg') %>" class="icon-levelup" alt="Level up icon">
        <div class="text-dark fs-6 fw-bold"><%= users_growth_percentage %> 
          <span class="text-gray fw-normal">
            <%= t("last_7_days") %>
          </span> 
        </div>
      </div>
    </div>

    <!-- Gr치fico a la derecha -->
    <div style="width: 120px; height: 60px;">
      <canvas
        id="usuariosChart"
        width="300"
        height="150"
        data-labels='<%= @labels.to_json.html_safe %>'
        data-values='<%= @usuarios_por_mes.to_json.html_safe %>'>
      </canvas>
    </div>
  </div>
</div>

<div class="mt-4 gap-3 div-cards">
  <!-- futura analisis categorias compradas home -->
  <div class="cards shadow-sm p-4 d-flex flex-row justify-content-between align-items-center w-33">
    <%= form_with model: @home_video, url: admin_update_home_video_path, method: :patch, local: true, html: { multipart: true } do |form| %>
      <div>
        <%= form.label :title, "Tittle del Home" %>
        <%= form.text_field :title %>
      </div>

      <div>
        <%= form.label :slogan, "Slogan del Home" %>
        <%= form.text_field :slogan %>
      </div>

      <div>
        <%= form.label :file_video, "O subir archivo MP4" %>
        <%= form.file_field :file_video %>
      </div>

      <div>
        <%= form.label :text_color, "Color del texto" %>
        <%= form.color_field :text_color %>
      </div>

      <%= form.submit "Guardar" %>
    <% end %>
  </div>
  
  <!-- Caja personalizar home -->
  <div class="cards shadow-sm p-4 w-66 d-flex flex-column">
    <p class='fs-5 fw-bold'>
      <%= t('customize_home') %>
    </p>

    <%= form_with model: @home_video, url: admin_update_home_video_path, method: :patch, local: true, html: { multipart: true } do |form| %>
      
      <!-- Primera fila -->
      <div class="form-row-responsive gap-3">
        <div class="input-container border flex-grow-1">
          <%= form.label :title, t('title_h2'), class: "input-label" %>
          <%= form.text_field :title, placeholder: t('placeholder_title_h2'), class: "custom-input" %>
        </div>

        <div class="input-container border flex-grow-1">
          <%= form.label :slogan, t('slogan_h2'), class: "input-label" %>
          <%= form.text_field :slogan, placeholder: t('placeholder_title_h2'), class: "custom-input" %>
        </div>
      </div>

      <!-- Segunda fila -->
      <div class="form-row-responsive gap-3 mt-5">
        <div class="upload-box flex-grow-1">
          <div class="floating-folder folder-unit">
            <div class="front-side">
              <div class="folder-tab"></div>
              <div class="folder-cover"></div>
            </div>
            <div class="back-side folder-cover"></div>
          </div>
          <label class="file-upload-btn">
            <%= form.file_field :file_video, class: "hidden" %>
              <%= t('Upload_mp4_file') %>
          </label>
        </div>

        <div class="input-container border flex-grow-1">
          <%= form.label :text_color, t('text_color'), class: "input-label" %>
          <%= form.color_field :text_color, value: "#3b82f6", class: "custom-input-color custom-input" %>
        </div>
      </div>

      <div class='text-end'>
        <%= form.submit t('save'), class: "mt-3 btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
